services:
  - type: web
    name: lms-backend
    runtime: docker
    rootDir: Learning-Management-System-main/backend
    plan: free
    autoDeploy: true
    healthCheckPath: /actuator/health

    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: default
      # PORT is automatically set by Render, but we can set a default
      - key: PORT
        value: "8080"

      # Database configuration - MUST be set in Render dashboard after creating MySQL database
      # 
      # Steps to configure:
      # 1. Create a MySQL database service in Render
      # 2. Copy the "Internal Database URL" from your MySQL service
      # 3. In this web service, go to Environment tab and add:
      #    - SPRING_DATASOURCE_URL: jdbc:mysql://<host>:<port>/<database>?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
      #    - SPRING_DATASOURCE_USERNAME: <username from MySQL service>
      #    - SPRING_DATASOURCE_PASSWORD: <password from MySQL service>
      #
      # Example:
      # SPRING_DATASOURCE_URL: jdbc:mysql://dbserver:3306/learning_management?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
      # SPRING_DATASOURCE_USERNAME: dbuser
      # SPRING_DATASOURCE_PASSWORD: dbpassword
